# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.6.22.1] - 2025.08.11

### Added

- 积分充值页面增加兑换码功能 (设置-积分)
- 增加兑换码管理功能 (管理员面板-用户-兑换码)

### Changed

- 合并官方 0.6.22 改动

## [0.6.21.1] - 2025.08.10

### Changed

- 合并官方 0.6.21 改动

## [0.6.20.1] - 2025.08.10

### Added

- 支持配置提示 Token 缓存价格 (管理员面板-设置-模型-模型价格配置)
- 支持删除历史积分日志 (管理员面板-用户-积分日志)
- 增加 GPT-5 系列模型的 max_completion_tokens 参数适配

### Changed

- 移除积分统计面板的数字展示
- 合并官方 0.6.20 改动

### Fixed

- 修复代码解释器运行异常

## [0.6.18.1] - 2025.07.20

### Changed

- 合并官方 0.6.18 改动

## [0.6.16.1] - 2025.07.15

### Added

- 支持对请求 Body 中的内容进行额外计费 (管理员面板-设置-积分-自定义价格配置)

### Changed

- 移除英文/中文以外的语言支持
- 合并官方 0.6.16 改动

## [0.6.15.1] - 2025.06.18

### Changed

- 合并官方 0.6.15 改动

## [0.6.14.1] - 2025.06.11

### Added

- 支持自定义模型 Logo URL
- 增加 HTTP Read Buffer Size 配置
- 请求异常时跳过计费
- 对 Embedding 接口计费 (/api/embeddings)

### Changed

- 修改积分统计的最大范围为最近 180 天
- 合并官方 0.6.14 改动

## [0.6.13.1] - 2025.05.30

### Added

- 支持对 Azure OpenAI 及 Ollama 的嵌入计费 (管理员面板-设置-积分)

### Changed

- 合并官方 0.6.13 改动

## [0.6.12.1] - 2025.05.29

### Added

- 支持对 OpenAI 的嵌入计费 (管理员面板-设置-积分)

### Changed

- 合并官方 0.6.12 改动

## [0.6.11.1] - 2025.05.27

### Changed

- 优化用量信息的交互
- 合并官方 0.6.11 改动

### Fixed

- 修复积分日志在部分场景下的样式异常

## [0.6.10.1] - 2025.05.19

### Added

- 积分统计增加总充值和总消耗信息

### Changed

- 积分统计增加自定义时间范围选择
- 积分日志搜索修改为搜索用户名
- 移除自定义滚动条样式
- 修改积分日志单页数量为 30
- 合并官方 0.6.10 改动

## [0.6.9.1] - 2025.05.11

### Added

- 支持查看详细积分记录 (管理员面板-用户-积分日志)
- 注册邮箱验证及邮箱域名白名单
- 支持配置单次请求最低消费
- 支持配置支付方式优先级 (二维码或者跳转)
- 增加更多积分余额校验

### Changed

- 合并官方 0.6.9 改动

### Fixed

- 修复图片 Token 计算异常

## [0.6.7.2] - 2025.05.08

### Changed

- 支付方式优先展示二维码

## [0.6.7.1] - 2025.05.07

### Changed

- 合并官方 0.6.7 改动

## [0.6.6.1] - 2025-05-05

### Added

- 新增管理页面 (管理员面板-设置-积分)
- 新增报表页面 (管理员面板-用户-积分统计)
- 支持配置积分兑换比例 (用于充值折扣)
- 支持对特性按次计费 (如网页搜索、图片生成)
- 支持配置请求模型需要的最低余额
- 工作空间中配置的模型使用基础模型价格计费
- 支持配置用户的初始积分
- 模型选项增加模型价格提示
- 支持对 Ollama 模型计费

### Changed

- 优化 Usage 兼容性
- 优化积分日志内容
- 优化充值二维码展示效果
- 优化响应数据的 Usage 格式
- 优化初始积分的小数位数
- 优化免费请求的积分余额校验
- 优化 Token 计算精确度

### Fixed

- 修复易支付的兼容问题
- 修复调用 chat.completion api 的兼容问题

## [0.6.5.16] - 2025-04-16

### Added

- 支持按照请求次数计费
- 支持 Pipe 模型计费
- 在对话 Usage 中增加扣费信息
- 增加 Markdown 编辑器
- 增加代码块折叠功能
- 支持通过 API 批量修改模型价格
- 支持设置允许充值的金额范围

### Changed

- 优化易支付支付后的跳转
- 优化较长上下文的计算性能

### Fixed

- 修复支付连接无法在微信内置浏览器打开的问题
- 修复余额不足的异常没有保存到对话日志的问题

## [0.6.4.9] - 2025-04-16

### Added

- 支持配置模型价格
- 支持用户充值积分 (易支付)

## [0.6.4.1] - 2025-04-13

### Added

- 支持自定义 Logo & Title
