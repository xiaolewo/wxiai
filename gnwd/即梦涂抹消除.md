npainting涂抹消除
最近更新时间：2025.08.18 17:25:05
首次发布时间：2024.03.12 10:33:42
我的收藏
有用
无用
接口简介​
用户可通过涂抹、选区等方式建立重绘区域，调用算法重新绘制。此功能为不支持输入prompt的消除功能，在路人消除、杂物消除、水印消除等任务表现较好，推荐使用分割接口来进行消除，消除的人物选择完整，建议一次性给客户返回3-4个效果供客户进行挑选。​
算法侧会出现一定概率生成「AI鬼脸」的问题，算法侧会返回错误码（201304），建议业务方可通过判断错误码显示兜底图片或自行处理。​
​
​Image​​
​Image​​
​Image​​
调用分割接口，识别主体，将主体进行消除​
调用分割接口，识别背景，将背景进行消除​
用户自己主动涂抹选择指定区域，将涂抹位置进行消除​
​
限制条件​
​
名称​
内容​
图片要求​
输入图要求：​ 1.图片格式：仅支持JPG、JPEG、PNG格式，建议使用JPG格式。​ 2.图片文件大小：最大 5 MB。​ 3.图片分辨率：最小 64x64，最大 4096x4096 。​
mask图要求：​ 1.单通道灰度图（0～255）​ 2.三通道图片，rgb值相等​
3.rgba 4通道，rgb值相等，a通道全为255​ 4.文件格式：8bt png编码，勿嵌入“描述文件（ICC Profile）”​
​
Demo展示​
​Image​​
请求说明​
​
名称​
内容​
接口地址​
https://visual.volcengineapi.com​
请求方式​
POST​
Content-Type​
application/json​
​
Header参数​
完整公共参数列表见 公共参数​
本服务Region为cn-north-1； Service为cv​
Query参数​
拼接到url后的参数，示例：https://visual.volcengineapi.com?Action=CVProcess&Version=2022-08-31​
​
参数​
可选/必选​
类型​
说明​
Action​
必选​
String​
接口名，取值：Img2ImgInpainting​
Version​
必选​
String​
版本号，取值：2022-08-31​
​
Body参数​
业务请求参数，放到request.body中，MIME-Type为application/json​
​
参数​
可选/必选​
类型​
说明​
req_key​
必选​
String​
取值: i2i_inpainting​
binary_data_base64​
必选（二选一）​
Array of String​
输入图片base64数组：​
0：输入图片，三通道RGB图​
1：输入mask，单通道灰度图，原图保持部分对应0(即黑色区域)，待消除区域对应255(即白色区域)​
image_urls​
必选（二选一）​
Array of String​
输入图片url数组：​
0：输入图片，三通道RGB图​
1：输入mask，单通道灰度图，原图保持部分对应0(即黑色区域)，待消除区域对应255(即白色区域)​
return_url​
可选​
bool​
输出是否返回图片链接 （链接有效期为24小时）​
steps​
可选​
int​
采样步数，生成图像的精细程度，越大效果可能更好，但相应的耗时会剧增​
默认值：30​
strength​
可选​
float​
取值范围(0.1,1.0)，越小越接近原图，越大越接近文本控制，如果设成0就和原图一模一样​
默认值：0.8，​
scale​
可选​
float​
取值范围[1, 20]，影响文本描述的程度​
默认值：7​
seed​
可选​
int​
随机种子，作为确定扩散初始状态的基础，非负数(-1表示随机种子)。若随机种子为相同正整数且其他参数均一致，则生成图片极大概率效果一致​
默认值：0​
dilate_size​
可选​
int​
mask膨胀半径，默认值15​
传给算法做消除的mask应该包裹整个物体，一般用户涂抹区域都会大于物体，但如果提供的mask是通过分割算法获得一般会紧贴物体，请适当增加dilate_size（默认15），不然可能由于漏抠部分要消除的物体，导致无法消除/生成新的物体的情况。​
quality​
可选​
string​
质量参数，默认为M​
H，质量最高，速度稍慢，​
M，质量中等，速度一般​
L，质量较低，速度最快​
logo_info​
可选​
LogoInfo​
水印信息​
​
LogoInfo​
水印相关信息。​
​
名称​
类型​
必选​
描述​
备注​
add_logo​
Boolean​
否​
是否添加水印。True为添加，False不添加。默认不添加​
​
position​
Int​
否​
水印的位置，取值如下：​
0-右下角​
1-左下角​
2-左上角​
3-右上角​
默认0​
​
language​
Int​
否​
水印的语言，取值如下：​
0-中文（AI生成）​
1-英文（Generated by AI）​
默认0​
​
opacity​
Float​
否​
水印的不透明度，取值范围0-1，1表示完全不透明，默认0.3​
​
logo_text_content​
String​
否​
明水印自定义内容​
​
​
输出说明​
通用输出参数​
请参考通用返回字段及错误码​
业务输出参数​
重点关注data 字段，其他字段为公共返回​
​
字段​
类型​
说明​
备注​
binary_data_base64​
Array of String​
输出处理过的图片Base64数组（单张图）​
​
image_urls​
Array of String​
输出处理过的图片url​
数组（单张图）输出图片格式为jpeg格式​
​
​
请求&返回完整示例​
请求示例​
​
{​
"binary_data_base64": ["原图", "原图标注后的mask"],​
"req_key": "i2i_inpainting",​
"scale": 7,​
"seed": 0,​
"steps": 30,​
"strength": 0.8​
}​
​
输出示例​
​
{​
"code": 10000,​
"data": {​
"algorithm_base_resp": {​
"status_code": 0,​
"status_message": "Success"​
},​
"binary_data_base64": ["消除图base64"],​
"image_urls":["消除图url"],​
"request_id": "740d84695b1a51a5e36f7559"​
},​
"message": "Success",​
"request_id": "2024031411153853949433144E29001798",​
"status": 10000,​
"time_elapsed": "3.940519855s"​
}​
​
错误码​
（1）通用错误码​
请参考通用返回字段及错误码​
（2）业务错误码​
​
http code​
错误码​
错误信息​
说明​
200​
10000​
Success​
成功​
400​
50411​
Pre Img Risk Not Pass​
输入图片前审核未通过​
400​
50511​
Post Img Risk Not Pass​
输出图片后审核未通过​
400​
50412​
Text Risk Not Pass​
输入文本前审核未通过​
400​
50512​
Post Text Risk Not Pass​
输出文本后审核未通过​
400​
50413​
Post Text Risk Not Pass​
输入文本NER、IP、Blocklist等拦截​
